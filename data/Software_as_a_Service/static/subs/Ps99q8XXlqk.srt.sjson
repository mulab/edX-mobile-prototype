{
  "start": [
    325, 
    5370, 
    6790, 
    8590, 
    12470, 
    15760, 
    19000, 
    20470, 
    24290, 
    27160, 
    32860, 
    34550, 
    35030, 
    35810, 
    38820, 
    42200, 
    45560, 
    46530, 
    50280, 
    52240, 
    54570, 
    56140, 
    59410, 
    62980, 
    65810, 
    68300, 
    69330, 
    69850, 
    71150, 
    74230, 
    75150, 
    76510, 
    78340, 
    82430, 
    85120, 
    86100, 
    87040, 
    87870, 
    89090, 
    92660, 
    93690, 
    94190, 
    96785, 
    97810, 
    100130, 
    103490, 
    104660, 
    108180, 
    108990, 
    110330, 
    113270, 
    114800, 
    118380, 
    120820, 
    125150, 
    126260, 
    129389, 
    130720, 
    131810, 
    134490, 
    137810, 
    141040, 
    142040, 
    145670, 
    148600, 
    151210, 
    153480, 
    156430, 
    160040, 
    162060, 
    165050, 
    168600, 
    170560, 
    173010, 
    174980, 
    176430, 
    178160, 
    180930, 
    183870, 
    185430, 
    187720, 
    192200, 
    195040, 
    196120, 
    198840, 
    199970, 
    204610, 
    208390, 
    211360, 
    212580, 
    215140, 
    216640, 
    220300, 
    224290, 
    227900, 
    232860, 
    234350, 
    236930, 
    237930, 
    241430, 
    245560, 
    247670, 
    249060, 
    252230, 
    256290, 
    257560, 
    260180, 
    264880, 
    268450, 
    270130, 
    272795, 
    277160, 
    281450, 
    284100, 
    286430, 
    289690, 
    291770, 
    294420, 
    298080, 
    300930, 
    303290, 
    304450, 
    307340, 
    311240, 
    315300, 
    318800, 
    321570, 
    324610, 
    325380, 
    326570, 
    329280, 
    332660, 
    334290, 
    335900, 
    336600, 
    340580, 
    343030, 
    345680, 
    346060, 
    348770, 
    351470, 
    355330, 
    357320, 
    359250, 
    360270, 
    362680, 
    367170, 
    369380, 
    371550, 
    372960, 
    375470, 
    377970, 
    379230, 
    380420, 
    382580, 
    386790, 
    389670, 
    391800, 
    394905, 
    395740, 
    398220, 
    401400, 
    405900, 
    408740, 
    414680, 
    418160, 
    420530, 
    422460, 
    425370, 
    429650, 
    432470, 
    433380, 
    436000, 
    436760, 
    440760, 
    441410, 
    446550, 
    450080, 
    453310, 
    455220, 
    458250, 
    461140, 
    464040, 
    465690, 
    469600, 
    472710, 
    475930, 
    478320, 
    481070, 
    485230, 
    486490, 
    490000, 
    493160, 
    494880, 
    498760, 
    501930, 
    503100, 
    504950, 
    506720, 
    510040, 
    512500, 
    516580, 
    518190, 
    523010, 
    525900, 
    528580, 
    533050, 
    535370, 
    537870, 
    541650, 
    547020, 
    550900, 
    552830, 
    556310, 
    557010, 
    562140, 
    566230, 
    569230, 
    571380, 
    575890, 
    579830, 
    583870, 
    588290, 
    591940, 
    596820, 
    597880, 
    601570, 
    603070, 
    605600, 
    608540, 
    611810, 
    614730, 
    619060, 
    620780, 
    624540, 
    627980, 
    629680, 
    634710, 
    638670, 
    639770, 
    641150, 
    643410, 
    646980, 
    650570, 
    653080, 
    656330, 
    659310, 
    662680, 
    664950, 
    667410, 
    669660, 
    674170, 
    676160, 
    677910, 
    680370, 
    683750, 
    688290, 
    691040, 
    693840, 
    697170, 
    698780, 
    702890, 
    707190, 
    710470, 
    714690, 
    718920, 
    720380, 
    723390, 
    726620, 
    730130, 
    732490, 
    735580, 
    739030, 
    741680, 
    744090, 
    746380, 
    747220, 
    750680, 
    752550, 
    754340, 
    757930, 
    760210, 
    761600, 
    765570, 
    769790, 
    771970, 
    773290, 
    776940, 
    781080, 
    784680, 
    786930, 
    790190, 
    791920, 
    795420, 
    798740, 
    799680, 
    801370, 
    804200, 
    807050, 
    808970, 
    811710, 
    815910, 
    817980, 
    821320, 
    825710, 
    827420, 
    832880, 
    837035, 
    838470, 
    841760, 
    846690, 
    848640, 
    852740, 
    856850, 
    860010, 
    863710
  ], 
  "end": [
    5370, 
    6790, 
    8590, 
    12470, 
    15760, 
    19000, 
    20470, 
    24290, 
    27160, 
    32860, 
    34550, 
    35030, 
    35810, 
    38820, 
    42200, 
    45560, 
    46530, 
    50280, 
    52240, 
    54570, 
    56140, 
    59410, 
    62980, 
    65810, 
    68300, 
    69330, 
    69850, 
    71150, 
    74230, 
    75150, 
    76510, 
    78340, 
    82430, 
    85120, 
    86100, 
    87040, 
    87870, 
    89090, 
    92660, 
    93690, 
    94190, 
    96785, 
    97810, 
    100130, 
    103490, 
    104660, 
    108180, 
    108990, 
    110330, 
    113270, 
    114800, 
    118380, 
    120820, 
    125150, 
    126260, 
    129389, 
    130720, 
    131810, 
    134490, 
    137810, 
    141040, 
    142040, 
    145670, 
    148600, 
    151210, 
    153480, 
    156430, 
    160040, 
    162060, 
    165050, 
    168600, 
    170560, 
    173010, 
    174980, 
    176430, 
    178160, 
    180930, 
    183870, 
    185430, 
    187720, 
    192200, 
    195040, 
    196120, 
    198840, 
    199970, 
    204610, 
    208390, 
    211360, 
    212580, 
    215140, 
    216640, 
    220300, 
    224290, 
    227900, 
    232860, 
    234350, 
    236930, 
    237930, 
    241430, 
    245560, 
    247670, 
    249060, 
    252230, 
    256290, 
    257560, 
    260180, 
    264880, 
    268450, 
    270130, 
    272795, 
    277160, 
    281450, 
    284100, 
    286430, 
    289690, 
    291770, 
    294420, 
    298080, 
    300930, 
    303290, 
    304450, 
    307340, 
    311240, 
    315300, 
    318800, 
    321570, 
    324610, 
    325380, 
    326570, 
    329280, 
    332660, 
    334290, 
    335900, 
    336600, 
    340580, 
    343030, 
    345680, 
    346060, 
    348770, 
    351470, 
    355330, 
    357320, 
    359250, 
    360270, 
    362680, 
    367170, 
    369380, 
    371550, 
    372960, 
    375470, 
    377970, 
    379230, 
    380420, 
    382580, 
    386790, 
    389670, 
    391800, 
    394905, 
    395740, 
    398220, 
    401400, 
    405900, 
    408740, 
    414680, 
    418160, 
    420530, 
    422460, 
    425370, 
    429650, 
    432470, 
    433380, 
    436000, 
    436760, 
    440760, 
    441410, 
    446550, 
    450080, 
    453310, 
    455220, 
    458250, 
    461140, 
    464040, 
    465690, 
    469600, 
    472710, 
    475930, 
    478320, 
    481070, 
    485230, 
    486490, 
    490000, 
    493160, 
    494880, 
    498760, 
    501930, 
    503100, 
    504950, 
    506720, 
    510040, 
    512500, 
    516580, 
    518190, 
    523010, 
    525900, 
    528580, 
    533050, 
    535370, 
    537870, 
    541650, 
    547020, 
    550900, 
    552830, 
    556310, 
    557010, 
    562140, 
    566230, 
    569230, 
    571380, 
    575890, 
    579830, 
    583870, 
    588290, 
    591940, 
    596820, 
    597880, 
    601570, 
    603070, 
    605600, 
    608540, 
    611810, 
    614730, 
    619060, 
    620780, 
    624540, 
    627980, 
    629680, 
    634710, 
    638670, 
    639770, 
    641150, 
    643410, 
    646980, 
    650570, 
    653080, 
    656330, 
    659310, 
    662680, 
    664950, 
    667410, 
    669660, 
    674170, 
    676160, 
    677910, 
    680370, 
    683750, 
    688290, 
    691040, 
    693840, 
    697170, 
    698780, 
    702890, 
    707190, 
    710470, 
    714690, 
    718920, 
    720380, 
    723390, 
    726620, 
    730130, 
    732490, 
    735580, 
    739030, 
    741680, 
    744090, 
    746380, 
    747220, 
    750680, 
    752550, 
    754340, 
    757930, 
    760210, 
    761600, 
    765570, 
    769790, 
    771970, 
    773290, 
    776940, 
    781080, 
    784680, 
    786930, 
    790190, 
    791920, 
    795420, 
    798740, 
    799680, 
    801370, 
    804200, 
    807050, 
    808970, 
    811710, 
    815910, 
    817980, 
    821320, 
    825710, 
    827420, 
    832880, 
    837035, 
    838470, 
    841760, 
    846690, 
    848640, 
    852740, 
    856850, 
    860010, 
    863710, 
    866240
  ], 
  "text": [
    "ARMANDO FOX: So during the break I was having a conversation with an alumnus", 
    "about feature flags.", 
    "And he raised a couple of questions.", 
    "One of them is, besides the fact that there's some amount of code expansion", 
    "to protect the flag, there's additional database tables or other", 
    "data storage that, once the entire feature has been rolled out, you", 
    "probably could delete those.", 
    "So for a while, you're sort of paying the overhead of having two versions of", 
    "part of the database up at the same time and two versions of the code,", 
    "essentially, up at the same time, just protected by which code path do you go", 
    "down based on the feature flag.", 
    "So, yes.", 
    "That is a trade off.", 
    "And in some sense, it's almost like asking you to violate one of the", 
    "things that we said you shouldn't do, which is to have a method whose body", 
    "is if Boolean thing, then do one set of stuff, else do", 
    "another set of stuff.", 
    "When we talk about design smells, we said, well, if you see that it's", 
    "really two different methods and you should refactor.", 
    "Well, this is the exception that tests the rule.", 
    "It is two different methods.", 
    "It's the old version and the new version of the code bound up in one", 
    "place so that during this transitional step you can have both versions", 
    "available and kind of flip back and forth between them until everybody's", 
    "gotten updated with the new code version that works", 
    "with the new schema.", 
    "So, yes.", 
    "In some cases there is a trade off.", 
    "But for a lot of services, the alternative is to", 
    "bring the service down.", 
    "And that may be less palatable.", 
    "So you have to decide which is the lesser of two evils.", 
    "I was commenting that one of the apps that I run, which is the theater one", 
    "that I've been using all the examples from, I know their", 
    "user base very well.", 
    "I know when they use it.", 
    "I know how they use it.", 
    "So when I want to do--", 
    "I've had migrations that take tens of minutes to do because they involve a", 
    "lot of data massaging.", 
    "But that's fine.", 
    "I just say, on Sunday from two to three in the morning it'll be", 
    "unavailable.", 
    "And all my users are in the Bay Area, so they don't care.", 
    "It doesn't affect their business that I do some planned downtime once in", 
    "while to roll out the features.", 
    "So like I said, if you have the option of doing that, you should do that.", 
    "It's simpler.", 
    "You can test it.", 
    "Like I said before, systems would be much more stable if it weren't for the", 
    "impact of having users.", 
    "So doing your migration and your upgrade without having those pesky", 
    "users interfering while you're trying to upgrade stuff.", 
    "If you have the luxury, by all means do that.", 
    "Monitoring.", 
    "If you're not monitoring it, it's probably broken.", 
    "I don't know who said this.", 
    "But they're right.", 
    "And as with so many other things, I wouldn't be standing here telling you", 
    "this if I had not been personally bit by it myself.", 
    "And especially now, where monitoring has gotten so much less painful than", 
    "it used to be.", 
    "There's pretty much no excuse for not doing some basic level of monitoring", 
    "if you're doing software as a service.", 
    "There's two different places, at least, where you could do monitoring.", 
    "One is when you're actually doing development.", 
    "And sometimes when you're doing monitoring at development people call", 
    "it profiling because the goal there is not to sort of monitor whether it's", 
    "crashing or users are getting slow service.", 
    "It's to actually keep an eye on the performance of your code as you're", 
    "developing it so that you won't have an unpleasant surprise when you", 
    "actually get to production.", 
    "But of course, most people, when they think of monitoring, they think of", 
    "monitoring in production itself.", 
    "So is my site still up?", 
    "Are people able to get to it?", 
    "Are they experiencing response times that are acceptable?", 
    "Do I have an Apdex score measured over, let's say, the last day that I'm", 
    "willing to live with?", 
    "And there's two different approaches that you can use.", 
    "The internal instrumentation approach means that your app itself has some", 
    "additional code, either in the app or in part of the platform", 
    "that hosts the app.", 
    "And remember, platform is sort of everything from the app server down.", 
    "So Rack, Apache.", 
    "All the software that collectively sits underneath your app code.", 
    "And the job of that additional code is explicitly to gather instrumentation,", 
    "gather data, about how your app is performing and do something", 
    "interesting with that data.", 
    "Maybe it's just storing it locally and you're going to go in there and look", 
    "at it and draw pretty graphs.", 
    "More commonly these days, it's sending it someplace else so that you can", 
    "examine your data using a nice software as a service interface.", 
    "And there's external monitoring, which is active probing by other sites.", 
    "So an example of this that I use on my site is Pingdom.", 
    "All it does is it periodically--", 
    "like once a minute-- it sends a ping to your application and", 
    "does a sanity check.", 
    "And not a ping in the network sense, if you've taken a networking class.", 
    "But it sends an HTTP request that should have a well-known response.", 
    "And you can do some simple sanity checks on what", 
    "comes back in the response.", 
    "So for example, if you're loading the app's homepage and you know some", 
    "strings that occur at specific points on that page, you can look for the", 
    "presence of those specific strings.", 
    "And this kind of a sanity check that the app is alive.", 
    "If somebody goes there, they're at least getting to the splash page.", 
    "You might wonder if you have good internal monitoring in place, what's", 
    "the benefit of doing external monitoring?", 
    "The biggest one is if the internal monitoring is in the app and the app", 
    "is down, then the internal monitoring is not doing anything.", 
    "Now, you could say things like if you don't receive notifications from the", 
    "app after a certain number of minutes, you assume the app is down.", 
    "But that is, in itself-- that's a form of external monitoring.", 
    "It's just a form where instead of pinging the app yourself, you're", 
    "making sure that every few minutes it tells you something.", 
    "So that's really a kind of external monitoring.", 
    "Also, sometimes apps might be slow for reasons that are inside the boundary.", 
    "In other words, something about your app or the way that it interacts with", 
    "the database or the hosting infrastructure might be the source of", 
    "the problem.", 
    "But in other cases, the hosting infrastructure might be just fine and", 
    "the problem might be observed by the users through no fault of your own.", 
    "So if the user is living in an area served by Comcast and it's impacted", 
    "with respect to network performance during certain hours of the night,", 
    "then during those hours there's a group of users who are going to see", 
    "overall worse performance even though your app is not behaving any", 
    "differently.", 
    "And you'd like to understand that.", 
    "Because if you're gathering data from a lot of different places, you can", 
    "actually figure out, well, most people are seeing the same behavior that my", 
    "internal monitoring is reporting.", 
    "But a few people are seeing worse behavior.", 
    "Why is that?", 
    "And you can basically deduce that it's not something within your control as", 
    "the app designer to fix.", 
    "And it is a way to get the view of users from many different places on", 
    "the internet.", 
    "If you know where most of your customers are, and some of those", 
    "people are getting really poor service, you might need to move to a", 
    "different hosting center who's peering with-- the ISP serving those customers", 
    "is higher quality.", 
    "And Pingdom, like I said, is an example of one of these", 
    "services that I use.", 
    "I think in the free plan you can monitor one site.", 
    "But for like nothing a month you can monitor multiple sites.", 
    "All it really does is do sanity checks.", 
    "It tells you what percentage uptime you had.", 
    "And it tells you--", 
    "from a whole bunch of different points in the world, you can sort of do a", 
    "nice graph showing what response times people are seeing.", 
    "But that's all it does.", 
    "It doesn't give you any detail.", 
    "It doesn't know anything about the structure of your app.", 
    "It can't tell you why your site is slow, short of giving you a clue as to", 
    "whether the site is slow no matter where you access it from or if it's", 
    "only slow as seen from certain areas.", 
    "But beyond that, you have to do more work to figure out what's slow so that", 
    "you can fix it.", 
    "And that's where internal monitoring really helps.", 
    "The way it used to be done-- and we can actually go look at an example.", 
    "This is the Millennium Cluster, which is one of the various clusters owned", 
    "and run by various CS labs.", 
    "So here's some metrics like the load average, the CPU utilization on a", 
    "variety of hosts in these different clusters.", 
    "The thing to notice about these is that they don't really tell you", 
    "anything about the apps running on the clusters.", 
    "What's being monitored here, really, is infrastructure.", 
    "We have no idea what applications are running on these or what measure of", 
    "application quality we care about and how these metrics,", 
    "whatever, capture it.", 
    "But this was one of the standard monitoring tools that sys", 
    "admins relied on.", 
    "That was Ganglia, by the way.", 
    "I think that was Ganglia.", 
    "Nagios is a somewhat more rich UI version of the same idea.", 
    "But today, it's much more popular to do hosted monitoring where you're", 
    "still collecting the information in your app, maybe some place that's not", 
    "in your source code but that's part of the app stack.", 
    "Remember we talked about one of the nice things about app servers like", 
    "Rack is that you can decorate Rack requests with other things.", 
    "That's a way that you can insert instrumentation to measure how long", 
    "things take to do.", 
    "And this means that the information can get sent to another site.", 
    "You can look at it even if your app is down.", 
    "New Relic is probably one of the most popular versions of this.", 
    "And they have both a development mode and a production mode.", 
    "They have a version where, while you're doing development, there's a", 
    "plug-in that you can use to be collecting performance information as", 
    "your tests are running, for example.", 
    "Or as you're running stuff through your development server.", 
    "A nice thing about New Relic is that the basic New Relic service is free", 
    "for apps deployed on Heroku.", 
    "So to turn it on, pretty much all you have to do is add a couple of lines to", 
    "one of your gem files and click the add-on on Heroku and", 
    "you've got it going.", 
    "I think I have--", 
    "just to show you what the basic version looks like.", 
    "The version we saw running edX was the advanced version with a", 
    "lot of whizzy features.", 
    "Here's my-- let me log in and get to my apps.", 
    "We'll do a couple of requests to the app.", 
    "We'll wait a minute or so while we continue with the lecture to let the", 
    "New Relic monitoring pick it up.", 
    "So this is one of the earliest versions of Rotten Potatoes.", 
    "It doesn't do very much except help us figure out.", 
    "We'll give it a little time to reload.", 
    "So we'll come back to New Relic in a moment.", 
    "And we'll see some pictures related to our app.", 
    "Thanks to my beautiful PowerPoint drawn diagram, you can see how this", 
    "kind of monitoring as a service, really, is--", 
    "how it works.", 
    "In fact, for a lot of what New Relic does you don't make any changes to", 
    "your source code.", 
    "Although, a nice feature that they have in the full plan as opposed to", 
    "the basic level which is free, is you can do JavaScript monitoring as well.", 
    "So remember when we saw on the edX site they were capturing the rendering", 
    "time versus the DOM set up time.", 
    "You can actually put a little snippet of code into your overall application", 
    "layout view that causes a small amount of JavaScript to collect", 
    "instrumentation that is then forwarded back to your New Relic collector.", 
    "So the idea is you've got users using the app, your app is running on top of", 
    "the Rack app server, and there's a database out here somewhere.", 
    "All of this is being instrumented in ways that your app generally doesn't", 
    "have to know about.", 
    "And the data is periodically sent over to New Relic, which keeps-- depending", 
    "on which plan you pay for--", 
    "anywhere from one to seven days worth of data.", 
    "They also run a prober.", 
    "So just like Pingdom, part of what they offer is, in addition to the", 
    "internal monitoring that you're collecting, they can set up external", 
    "pings so that once every few minutes a well-known URL in your application is", 
    "pinged and you can return some data.", 
    "And then you can inspect this using a nice GUI such as, we hope, this one.", 
    "Which, by now, has probably seen some of our requests.", 
    "Ah, there we go.", 
    "So in the really simple format I can see time spent in the database.", 
    "So this is the total time for a request, is the height of each of", 
    "these bars.", 
    "Time was spent in the database.", 
    "This was time spent in the Ruby interpreter.", 
    "And this was time spent in basically everything that happens before your", 
    "request hits the Rack application server.", 
    "Or whichever application server you have deployed.", 
    "So to a first order, there's not a lot you can do about the green.", 
    "There's some that you can do about the blue.", 
    "And, as we'll see in the next section when we talk about caching in indices,", 
    "there's often quite a bit you can do about the orange.", 
    "And it's the orange then ultimately kills you when you're trying to stay", 
    "in the platform as a service tier.", 
    "So I guess one thing I would say is, if you don't have New Relic turned on", 
    "in your Heroku app deployment, why not?", 
    "So you should do that.", 
    "There's a number of levels of which you can monitor stuff.", 
    "And basically they vary in terms of whether it's internal or external,", 
    "what level of detail you get, and what the purpose of your monitoring is.", 
    "So for example, if what you're concerned about is just availability--", 
    "can people get to the basic pages on your site?--", 
    "Pingdom is a fine tool that will at least give you a sanity check on", 
    "things like that.", 
    "If your production site ever throws an exception, rather than having the", 
    "users see the ugly exception page or an error occurred, there's a service", 
    "called Airbrake, which is also a Heroku plug-in that will collect all", 
    "the back trace information, discreetly notify you via email or SMS, and then", 
    "let you go browse the stack trace and stuff after showing the user a much", 
    "nicer message.", 
    "New Relic actually lets you get inside of your controller actions.", 
    "You can see which controller actions took the longest time to run.", 
    "You can see which database queries issued by your Rails app took the", 
    "longest time to satisfy in the database.", 
    "And as we'll see when we talk about caching, that's a really useful tool", 
    "to figure out where you're going to go after performance problems.", 
    "Another kind of monitoring is when your app is working fine but you want", 
    "to understand how your users are interacting with it.", 
    "So if there's a multi-step process that your users have to go through,", 
    "how far do they get?", 
    "If there's places where they can make one or another choice, can you keep", 
    "track of how often they make each choice?", 
    "Some people call this click tracking.", 
    "Others call it a monitoring the user's behavior for think time.", 
    "So how long does the user wait between--", 
    "they click on a page, they go there.", 
    "How long do they spend on that page before moving on to somewhere else?", 
    "Google Analytics, which also has a free tier of service, again, they give", 
    "you a little piece of JavaScript that you put into", 
    "your application template.", 
    "And every view that includes that template will send some data back to", 
    "Google that's more useful, really, for things like understanding how your app", 
    "is being used as opposed to keeping an eye on whether your app is failing or", 
    "running too slow.", 
    "And if you're running your own platform, you can actually install a", 
    "number of different command line tools.", 
    "God, Nagios, and Monit are probably among the three most popular that you", 
    "can configure to collect various instrumentation and just leave it in", 
    "the local file system.", 
    "And then you go analyze it yourself.", 
    "With monitoring as a service, you usually don't need to do this.", 
    "But I wanted to put it up here for completeness because this is roughly", 
    "how things used to be done.", 
    "A little tidbit I'm going to leave you with and then we'll break off and", 
    "continue next time is this is an interesting use of Cucumber.", 
    "On the topic of using Cucumber for other things", 
    "besides just user stories.", 
    "Somebody did a nice plug-in where you can write Cucumber step definitions", 
    "that talk to New Relic.", 
    "So if you've already got New Relic monitoring set up, part of your", 
    "monitoring process is you can actually encode what you're checking for in", 
    "your application as user stories.", 
    "And instead of manually going to check the user interface or waiting for an", 
    "email to come, you'll have these tests constantly running and you'll get a", 
    "notification if something ever goes wrong.", 
    "But the idea is that this is another example of using the user story", 
    "approach to come up with plain English documentation that expresses what", 
    "you're trying to capture in these monitoring scenarios.", 
    "So with that, we will stop at this point.", 
    "And we'll finish this section on Wednesday."
  ]
}