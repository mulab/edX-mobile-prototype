{
  "start": [
    580, 
    3860, 
    7890, 
    10360, 
    11890, 
    15270, 
    18220, 
    19920, 
    21000, 
    23500, 
    27620, 
    30340, 
    32570, 
    33780, 
    38370, 
    39720, 
    42150, 
    44640, 
    47590, 
    50930, 
    53800, 
    56670, 
    57250, 
    61120, 
    64440, 
    66490, 
    70480, 
    73390, 
    77910, 
    81760, 
    84320, 
    86850, 
    90090, 
    93840, 
    96680, 
    98930, 
    100460, 
    103760, 
    106670, 
    109670, 
    113880, 
    117930, 
    121410, 
    123840, 
    127190, 
    130419, 
    132520, 
    135350, 
    139380, 
    144340, 
    145940, 
    149430, 
    150120, 
    152540, 
    154400, 
    157530, 
    161050, 
    162610, 
    165880, 
    166790, 
    169760, 
    172490, 
    173810, 
    176430, 
    178760, 
    181720, 
    185420, 
    188990, 
    190875, 
    194560, 
    196850, 
    200260, 
    201700, 
    204290, 
    206410, 
    208620, 
    209560, 
    212600, 
    215190, 
    219040, 
    221650, 
    224920, 
    228930, 
    229540, 
    230480, 
    232170, 
    235630, 
    240480, 
    242540, 
    245810, 
    248770, 
    251660, 
    252890, 
    257060, 
    260709, 
    262530, 
    264330, 
    268160, 
    272260, 
    275290, 
    275870, 
    279610, 
    283950, 
    285920, 
    289910, 
    292040, 
    295620, 
    298770, 
    300300, 
    303960, 
    305740, 
    308220, 
    309570, 
    313060, 
    316040, 
    319210, 
    322450, 
    324540, 
    327420, 
    328060, 
    332610, 
    334780, 
    337720, 
    338850, 
    340440, 
    343510, 
    344460, 
    347550, 
    351170, 
    354680, 
    359050, 
    360220, 
    361240, 
    364180, 
    366390, 
    370140, 
    373920, 
    377090, 
    382010, 
    385970, 
    388510, 
    391710, 
    394980, 
    397940, 
    400020, 
    402890, 
    406190, 
    407350, 
    411170, 
    413890, 
    416880, 
    419630, 
    420710, 
    424070, 
    426430, 
    427930, 
    428450, 
    431330, 
    434970, 
    438860, 
    441110, 
    442930, 
    444610, 
    448470, 
    450960, 
    454220, 
    456420, 
    459400, 
    462740, 
    465530, 
    469170, 
    471060, 
    474810, 
    478470, 
    481750, 
    484700, 
    485760, 
    490220, 
    493150, 
    495800, 
    496940, 
    500390, 
    502590, 
    506680, 
    509490, 
    511800, 
    512919, 
    515780, 
    520308, 
    522710, 
    525800, 
    528180, 
    530250, 
    531670, 
    533540, 
    535040, 
    537980, 
    540520, 
    541790, 
    545060, 
    549030, 
    551680, 
    553900, 
    554120, 
    559010, 
    564150, 
    566850, 
    570570, 
    573960, 
    576300, 
    580600, 
    582860, 
    584820, 
    587640, 
    588890, 
    592270, 
    594910, 
    598400, 
    601400, 
    603270, 
    608810, 
    610510, 
    614790, 
    618740, 
    620680, 
    624360, 
    625600, 
    628780, 
    632060, 
    633150, 
    636590, 
    641300, 
    643570, 
    647290, 
    649890, 
    652300, 
    654020, 
    658240
  ], 
  "end": [
    3860, 
    7890, 
    10360, 
    11890, 
    15270, 
    18220, 
    19920, 
    21000, 
    23500, 
    27620, 
    30340, 
    32570, 
    33780, 
    38370, 
    39720, 
    42150, 
    44640, 
    47590, 
    50930, 
    53800, 
    56670, 
    57250, 
    61120, 
    64440, 
    66490, 
    70480, 
    73390, 
    77910, 
    81760, 
    84320, 
    86850, 
    90090, 
    93840, 
    96680, 
    98930, 
    100460, 
    103760, 
    106670, 
    109670, 
    113880, 
    117930, 
    121410, 
    123840, 
    127190, 
    130419, 
    132520, 
    135350, 
    139380, 
    144340, 
    145940, 
    149430, 
    150120, 
    152540, 
    154400, 
    157530, 
    161050, 
    162610, 
    165880, 
    166790, 
    169760, 
    172490, 
    173810, 
    176430, 
    178760, 
    181720, 
    185420, 
    188990, 
    190875, 
    194560, 
    196850, 
    200260, 
    201700, 
    204290, 
    206410, 
    208620, 
    209560, 
    212600, 
    215190, 
    219040, 
    221650, 
    224920, 
    228930, 
    229540, 
    230480, 
    232170, 
    235630, 
    240480, 
    242540, 
    245810, 
    248770, 
    251660, 
    252890, 
    257060, 
    260709, 
    262530, 
    264330, 
    268160, 
    272260, 
    275290, 
    275870, 
    279610, 
    283950, 
    285920, 
    289910, 
    292040, 
    295620, 
    298770, 
    300300, 
    303960, 
    305740, 
    308220, 
    309570, 
    313060, 
    316040, 
    319210, 
    322450, 
    324540, 
    327420, 
    328060, 
    332610, 
    334780, 
    337720, 
    338850, 
    340440, 
    343510, 
    344460, 
    347550, 
    351170, 
    354680, 
    359050, 
    360220, 
    361240, 
    364180, 
    366390, 
    370140, 
    373920, 
    377090, 
    378570, 
    385970, 
    388510, 
    391710, 
    394980, 
    397940, 
    400020, 
    402890, 
    406190, 
    407350, 
    411170, 
    413890, 
    416880, 
    419630, 
    420710, 
    424070, 
    426430, 
    427930, 
    428450, 
    431330, 
    434970, 
    438860, 
    441110, 
    442930, 
    444610, 
    448470, 
    450960, 
    454220, 
    456420, 
    459400, 
    462740, 
    465530, 
    469170, 
    471060, 
    474810, 
    478470, 
    481750, 
    484700, 
    485760, 
    490220, 
    493150, 
    495800, 
    496940, 
    500390, 
    502590, 
    506680, 
    509490, 
    511800, 
    512919, 
    515780, 
    520309, 
    522710, 
    525800, 
    528180, 
    530250, 
    531670, 
    533540, 
    535040, 
    537980, 
    540520, 
    541790, 
    545060, 
    549030, 
    551680, 
    553900, 
    554120, 
    559010, 
    564150, 
    566850, 
    570570, 
    573960, 
    576300, 
    580600, 
    582860, 
    584820, 
    587640, 
    588890, 
    592270, 
    594910, 
    598400, 
    601400, 
    603270, 
    608810, 
    610510, 
    614790, 
    618740, 
    620680, 
    624360, 
    625600, 
    628780, 
    632060, 
    633150, 
    636590, 
    641300, 
    643570, 
    647290, 
    649890, 
    652300, 
    654020, 
    658240, 
    659490
  ], 
  "text": [
    "We gave a brief introduction last time to Rails and how the pieces of the", 
    "Rails framework map onto the general architecture of software as a service,", 
    "and we're going to continue by exploring the various pieces in a", 
    "little more detail.", 
    "Seeing how all the moving parts work in a really simple app, starting with", 
    "databases and migrations.", 
    "We already know this from last time, I guess, but the", 
    "database is golden, right?", 
    "It's where the customer's data lives.", 
    "It's the part of the app that actually maintains data persistent storage.", 
    "So you don't want to test your app on the production database.", 
    "This may seem obvious, but you'd be surprised that there are people who", 
    "actually do this.", 
    "So the Rails solution to this problem is that it actually defines different", 
    "environments.", 
    "The three environments that are sort of built in when you generate a new", 
    "app are called development, testing, and production.", 
    "But you could actually define additional environments yourself.", 
    "And the idea is that each environment has its own copy of the database, it", 
    "may also have its own rules for how to deploy the application.", 
    "There may be certain libraries in certain settings that apply in one but", 
    "not the other.", 
    "For example, if you have an app that sends email to the users, you don't", 
    "want the actual emails being sent when you're developing and testing the app,", 
    "you only want to turn that on in production.", 
    "So there's a number of features that depend on which environment you're in", 
    "and Rails gives you a database per environment.", 
    "So given that you actually have not one database but n databases, whatever", 
    "you're doing to change the schema as you develop your application, at some", 
    "point you're going to have to make those same changes to the one that's", 
    "in the production environment, the real database.", 
    "So the Rail solution to this is a migration, which basically is the", 
    "first example we're going to see this idea of automation is your friend.", 
    "If you can automate something, in other words, instead of doing it", 
    "manually if can create a script that does it, you", 
    "should create that script.", 
    "And it wouldn't surprise you to learn that for a lot of common tasks, like", 
    "changing the database, there are scripts that are already provided for", 
    "you as part of Rails to help you do that.", 
    "So why would you do things this way instead of just manually logging into", 
    "some sort of a SQL GUI browser, and adding and changing columns?", 
    "Well for one thing, when you have migrations the programmatically change", 
    "the database you can identify each one.", 
    "If you're changing the database in phases you can actually remember when", 
    "did you make each change, why did you make each change?", 
    "You can even imagine that some changes are reversible.", 
    "If it turns out that your design does the wrong thing and you need to back", 
    "that change out, again, being able to automate that process is a lot more", 
    "reliable than trying to get it accurately done by hand.", 
    "You could also manage them.", 
    "Of course you're already all using Git or some similar tool for version", 
    "control, right?", 
    "I'm just not going to ask, because of course you're doing that.", 
    "I mean, you're juniors and seniors.", 
    "So even though we'll talk more about version control when we talk about", 
    "teams, a nice thing about migrations is you can version them.", 
    "They're like any other kind of code.", 
    "If you manually make some changes to the database, who knows what to do it", 
    "unless you wrote it down.", 
    "But if you actually have a script that does it, you can version that script.", 
    "You can keep it under source code control, it becomes part of your", 
    "source tree.", 
    "And perhaps most important, if you automate something you", 
    "could repeat it reliably.", 
    "One comparison that you can read about in the book and which you get direct", 
    "experience with every time you deploy a homework, is this bundler tool", 
    "that's become part of Rails that specifies all the gems, the libraries,", 
    "that your application depends on.", 
    "And the idea is that instead of sort of configuring each environment to", 
    "have all right gems, you list them in a file.", 
    "And there's a task somewhere that automates making each environment look", 
    "just the way that file says.", 
    "So migrations is really another example of this.", 
    "So this is a theme we're going to come back to again and again.", 
    "If you can automate it, you should automate it.", 
    "Don't do it by hand.", 
    "Instead create the tools that will allow you to do it automatically,", 
    "repeatably, reliably, and so forth.", 
    "So with that in mind, how do you actually do this for migrations?", 
    "Again, here's the first example of something we're going to see many", 
    "examples of throughout the course, a code generator.", 
    "We've already seen that you can define new functions on the fly when a Ruby", 
    "program runs.", 
    "That's metaprogramming.", 
    "We already saw that last week.", 
    "But there's also cases where what you really want to do is generate a bunch", 
    "of code that pretty much follows a standard template, but each instance", 
    "that you generate is going to be just a little bit different.", 
    "So for example, in changing a database, there's some basic", 
    "housekeeping you have to do to open the database connection and stuff like", 
    "that, but then the specifics of what you're going to change could be", 
    "different every time.", 
    "So there's a number of different code generators built into Rails that will", 
    "actually generate an entire script, which you then customize and run.", 
    "And migrations are the first example of that.", 
    "So let's take a look at one.", 
    "I actually have these already queued up, so hopefully this will work.", 
    "So when I ran Rails generate migration, and if you do dash, dash,", 
    "help at the end of it, you'll see that it's got a million options to make", 
    "life easier.", 
    "But some of this boilerplate code like, the fact that it inherits from", 
    "an active record migration class, some of the basic body code inside the up", 
    "and the down migration are provided for you.", 
    "And then I fill inside the migration what I'm trying to have", 
    "changed in the database.", 
    "So we talk about migrations having an Up part and a Down part.", 
    "The Up part is, I'm going to apply this change to the database, I'm going", 
    "to change the schema.", 
    "The Down part is, suppose it turns out that that was the wrong thing and I", 
    "need to be able to undo it later?", 
    "Now you can imagine there are cases where you can't", 
    "really undo a migration.", 
    "For example, if the migration is get rid of a certain table or get rid of a", 
    "certain column there's really no undo around that.", 
    "But if the migration has to do with changing the format of a column or", 
    "renaming a column or a table, you could imagine undoing those things.", 
    "So you can provide both an Up and a Down migration.", 
    "When we talk about deployment, we'll talk about what are the roles of those", 
    "different things.", 
    "But for now let's focus on the Up migration which is, I want to add", 
    "something to my schema.", 
    "The migration syntax is pretty simple.", 
    "I say create table.", 
    "I give the table a name.", 
    "And then with the yielded object, I specify the kinds of", 
    "columns that I want.", 
    "So I want a string column for the title of a movie, for the rating of a", 
    "movie, I want to text field for the description, and so on.", 
    "All that does, when you run Rails generate migration and you go edit", 
    "that file, all we've done so far is create the instructions that say what", 
    "we want to do to the database.", 
    "We haven't actually done it.", 
    "We haven't applied the migration, we've only created it.", 
    "So if we say rake db:migrate--", 
    "and you've already heard about rake and presumably have read about it--", 
    "rake is a tool that allows you to automate a lot of common tasks.", 
    "And some of the built in tasks like this one allow you to automate the", 
    "process of applying the migration.", 
    "If you have an app that's already deployed in production rake db:migrate", 
    "will just apply it to your development environment.", 
    "But to apply it to production you need to cause the migration to run on", 
    "Heroku, which is what we are going to be using to deploy our apps, but it's", 
    "otherwise basically the same command.", 
    "Now notice that I haven't given any arguments.", 
    "If you have many migrations to the database, over the life of your app", 
    "you're going to make many changes, how does it know which one you're talking", 
    "about applying?", 
    "Well when you apply a migration it also records in the database itself,", 
    "in a separate table that's automatically created and managed by", 
    "Rails, which migrations have already been applied.", 
    "So rake db:migrate just says, apply all the ones that", 
    "haven't yet been applied.", 
    "Which means it is item potent in the lovely language of computer science.", 
    "You can run the command multiple times and it's the same as if", 
    "you ran it one time.", 
    "OK?", 
    "And this is very useful because if you've got different people on the", 
    "team and different people are creating migrations to support their own code,", 
    "at any given time you can always just run rake db:migrate and make sure that", 
    "you've gotten all of the latest changes to schema, and", 
    "they're up to date.", 
    "So this kind of--", 
    "if we want to wrap this up all together we can make the first entry", 
    "in what I'm going to call the cookbook for doing things with Rails", 
    "applications, Rails cookery.", 
    "When you want to augment the functionality of your app, when you", 
    "want to add features, that means that you're probably going to be adding", 
    "models, and probably the views and controllers the go along with them.", 
    "Because models are stored in the database you have to create a", 
    "migration in order to establish where in the database it's going to live,", 
    "what the attributes of that model are.", 
    "So to add a new model, or to change the attributes of an existing one, you", 
    "first create a migration that describes the changes, Rails generate", 
    "migration will create a boilerplate file for you with an automatically", 
    "determined file name, and the filings are determined so that they're always", 
    "in sequential order.", 
    "The files appear so that when they're listed, the most recent files always", 
    "reflect the most recently applied migrations.", 
    "You fill in that file and then you apply the migration to your", 
    "development database.", 
    "So now your copy of the app that you're editing has the latest and", 
    "greatest schema, you can develop your feature.", 
    "And when you're convinced that you're good to go--", 
    "oops, sorry-- and you apply--", 
    "after applying the migration, you probably have to create a file for the", 
    "actual model code.", 
    "That's what we're going to do next.", 
    "And probably the next time that you run your tests, we're going to talk", 
    "about testing in the next couple of weeks, but your tests are going to get", 
    "confused because remember, I said there's three separate environments,", 
    "development, testing, and production.", 
    "Development is where you're actually writing your code and", 
    "interacting with your app.", 
    "The testing environment is the one that's used for", 
    "automated testing only.", 
    "And it's largely managed by Rails itself.", 
    "But there's a separate task that allows you to update the", 
    "test database schema.", 
    "So once you've applied it to the development database you can run rake", 
    "db test prepare and that will essentially clone the state of the", 
    "development database over to the test database, and then your", 
    "test won't be confused.", 
    "OK?", 
    "So this is kind of a cookbook process for adding a new model, or supporting", 
    "a new model in a Rails app using migrations, as opposed to doing it the", 
    "manipulating a SQL like GUI kind of thing.", 
    "And trust me on this, if you do this even one -- this is one of the big", 
    "stumbling blocks for me when I started learning Rails was, this is overkill.", 
    "I just want to create a table with three simple columns.", 
    "Why should I create a script to create another script that I have to edit,", 
    "that I have to then apply, just to do this.", 
    "Believe me, this is the way of less pain.", 
    "The first time you've done this you'll have to get used to it.", 
    "It becomes very easy.", 
    "And you will rue the day that you didn't do it in an automated way.", 
    "Because when it comes time to apply the migrations in production, on your", 
    "real app, you're going to wonder what all you were thinking, and what you", 
    "actually typed in that caffeine induced stupor that usually", 
    "accompanies late night changes.", 
    "So, with that in mind, let's start exercising brains.", 
    "I showed you a really simple code snippet.", 
    "In fact, I'm going to show you the same code snippet again that", 
    "represented a simple migration that I created to make this table", 
    "with movies in it.", 
    "And I said, the syntax is really easy, it's create table.", 
    "Give it the name of the table.", 
    "And then I have this block that I've yielded an object to.", 
    "This t object I'm calling all these methods on it like string, and text,", 
    "and daytime.", 
    "My question for you is, even though you probably haven't browsed the", 
    "source code of Rails to figure out the answer, what is probably the kind of", 
    "thing being yielded in the migration code?", 
    "In other words, what kind of a thing in this example is t?", 
    "Is it an object that represents the database?", 
    "It represents an instance of a model?", 
    "It represents a table?", 
    "Or no real way to tell just based on this information?", 
    "So think about that."
  ]
}